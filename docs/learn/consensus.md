---
sidebar_position: 5
---

# Consensus Mechanism

A consensus mechanism (algorithm) is a way of reaching a consensus between trustless entities. In blockchain technology, it is used to determine whether a block is valid or not. The performance of blockchain networks relies heavily on the efficiency of the adopted consensus mechanisms, and it significantly impacts the perceived usability of blockchain applications.

**OmnichainL2 Mainnet** exhibits the following performance metrics:
- Handles **4,000 transactions per second**.
- Provides **immediate transaction finality**.
- Achieves a **one-second block generation time**.
- Supports participation from **over 50 consensus nodes** in the consensus process.

In this document, we will explore how **OmnichainL2** implements its high-performing consensus process.

---

## Background

Bitcoin uses **Proof-of-Work (PoW)**, while Ethereum has transitioned to **Proof-of-Stake (PoS)**, where block-generating nodes are selected based on their stake. These algorithms typically involve no direct communication between nodes when determining block validity. As a result, forks can occur, meaning two or more blocks can be created at the same height. The "longest chain wins" rule is often applied to resolve forks, merging them into a single canonical chain over time. However, this approach lacks immediate finality, as blocks can be reverted if they belong to a shorter chain. This probabilistic finality can only be achieved after a waiting period, which still doesn't guarantee 100% certainty.

The lack of immediate finality poses challenges for customer-facing services built on blockchain platforms. For example, in financial services, a user transferring funds must wait 30 to 60 minutes to confirm the transaction's validity, as the service must ensure no forks have occurred and enough blocks have been added to the chain. This delay negatively impacts both users and service providers.

---

## Practical Byzantine Fault Tolerance (PBFT)

To address these issues, consensus algorithms that guarantee finality are required. The **Byzantine Fault Tolerance (BFT)** algorithm, first introduced in 1982 by Lamport, Shostak, and Pease, was later refined by Miguel Castro and Barbara Liskov in 1999 into **Practical Byzantine Fault Tolerance (PBFT)**. PBFT provides high-performance state machine replication and ensures immediate finality.

Unlike PoW or PoS, where nodes validate blocks independently, PBFT requires nodes to communicate with each other to reach consensus. This communication ensures that block finality is guaranteed as soon as consensus is achieved.

The PBFT message flow involves multiple phases of communication between nodes. However, this approach has a scalability limitation: as the number of nodes increases, the communication volume grows exponentially, making it impractical for large networks.

---

## Consensus Mechanism in OmnichainL2

**OmnichainL2** is designed to be an enterprise-ready, service-centric platform. To achieve this, it addresses the finality problem and allows a large number of nodes to participate in the network. **OmnichainL2** uses an optimized version of **Istanbul BFT**, a modified PBFT algorithm tailored for blockchain networks.

### Network Architecture
In **OmnichainL2**, there are three types of nodes:
1. **Consensus Nodes (CNs)**: Managed by **Core Cell Operators (CCOs)**, these nodes are responsible for block generation.
2. **Proxy Nodes (PNs)**: Facilitate communication between CNs and other nodes.
3. **Endpoint Nodes (ENs)**: Serve as access points for users and applications.

All nodes in the network verify blocks generated by CNs. For more details on the network topology, refer to the [Network Topology Documentation](#).

### Fast Finality with Istanbul BFT
**OmnichainL2** achieves fast finality by adopting and improving Istanbul BFT. Since validation and consensus are performed for each block, forks are eliminated, and block finality is guaranteed instantly upon consensus.

### Scalability with Committee Selection
To address the scalability issue of PBFT, **OmnichainL2** introduces a **Committee** system. CNs collectively form a **Council**, and for each block generation, a subset of CNs is randomly selected as Committee members using a **Verifiable Random Function (VRF)**. This ensures that consensus messages are exchanged only among Committee members, limiting communication volume and enabling scalability.

---

## Performance and Scalability

Currently, **OmnichainL2 Mainnet** delivers:
- A throughput of **4,000 transactions per second**.
- A **one-second block generation interval**.
- Support for **over 50 consensus nodes**, with plans to increase this number as the algorithm is further optimized.

By leveraging its optimized consensus mechanism, **OmnichainL2** provides a robust, scalable, and enterprise-grade blockchain platform capable of meeting the demands of modern decentralized applications.